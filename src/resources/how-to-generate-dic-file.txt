Конвертер словарей для PocketBook

Конвертер позволяет преобразовать словари в формате XDXF, Dict и Lingvo DSL в формат, поддерживаемый электронной книгой PocketBook. Для создания словаря, кроме исходного файла, нужно подготовить 3 файла с информацией об исходном языке словаря:
— collates.txt – таблица преобразования строчных и акцентированных символов в заглавные
— morphems.txt – список морфем (в следующих версиях словаря будет использоваться для распознавания словоформ)
— keyboard.txt – раскладка клавиатуры для исходного языка

Файлы должны быть в кодировке UTF-8. Для русского и английского языка эти файлы уже подготовлены (каталоги eng и rus). Формат collates.txt и keyboard.txt ясен из примеров, описание формата morphems.txt см. ниже.

Создание словаря

Скопируйте исходный словарь в папку DictionaryConverter. Конвертер запускается из командной строки:

converter.exe исходный_словарь каталог_с_языковой_информацией

например:

converter.exe dict.xdxf eng

Другой способ запуска – в проводнике Windows, удерживая клавишу CTRL, выделите исходный файл словаря и каталог с языковой информацией, и «перетащите» их на значок converter.exe.
При успешной конвертации должен создасться файл с расширением dic. Скопируйте его на устройство в папку \system\dictionaries, и он появится в списке «направление перевода».

Где брать словари

xdxf.revdanica.com/down — база словарей в формате XDXF
free-dict.narod.ru/index.html#dicts – слоаври в формате Dict *
traduko.lib.ru — словари для Lingvo
lingvodics.com — словари для Lingvo
* Словари Dict перед конвертированием нужно распаковать с помощью утилиты makezd в текстовый файл (утилита доступна для скачивания на free-dict.narod.ru), например:

makezd –u dictionary.zd dictionary.txt

Обратите внимание, что конвертирование словарей для Lingvo возможно только из исходных файлов (DSL). Словари в упакованном формате (LSD) не поддерживаются из-за лицензионных ограничений.

Формат списка морфем

Файл morphems.txt может содержать следующие элементы:

1) классы символов:

%номер=список_символов

Например, классы символов «русские гласные буквы», «русские согласные буквы» описываются строками:

%1=аеиоу
%2=бвгджзклмнпрстфхцчшщ

2) Морфемы:

ˆокончание1/окончание2/...=вариант1/вариант2/…

Если окончание выбранного слова совпадает с одним из окончаний в левой части, будет произведён поиск по всем вариантам окончаний в правой части (при этом приоритет имеет исходный вариант слова, затем варианты слева направо).
В левой части можно использовать символ «?» (любой символ) и цифры 0-9 (номер класса символов). В правой части «точка» обозначает исходный символ в заменяемом окончании.

Примеры морфем:

^2е/2и/2у/2ы/2ой/2ам/2ами=.а

Слова «книги», «книгой», «книгам» будут заменены на «книга».

^2ой/2ей/2ому/2ему/2ых/2их/2ым/2им=.ый/.ой/.ий

Для слова «быстрому» будут проверены варианты и выполнена замена на «быстрый».